import{i as O,h as B,q as k,W,o,k as z,Z as H,Y as E,z as n,X as b,N as l,O as s,V as $,U as x,T as g,a4 as A,m as C,p as h,M as X,a0 as Y,r as K,F as Z,n as P,_ as Q,$ as ee}from"./vue-18a0f25a.js";import{k as te,l as ne,d as G,u as F,a as q,c as oe,n as ae,_ as V,p as se,q as re,j as J,i as le,t as ie}from"./index-a2579a4a.js";import{h as ce,o as T}from"./router-4bf38355.js";const ue="/pc/assets/logo-8000aeec.png",de="/api/index/";function me(d,p){te(()=>{if(ne.currentRoute.value.meta.initialize===!1)return;const m=G(),r=F();if(!m.isLogin()&&r.initialize||m.isLogin()&&r.userInitialize)return;const f=q();oe({url:de+"index2",method:"get",params:{requiredLogin:p?1:0}}).then(i=>{ae(i.data.site.siteName),ce(i.data.rules,i.data.menus),r.dataFill(i.data.site),f.setStatus(i.data.openMemberCenter),O(i.data.userInfo)||(i.data.userInfo.refresh_token=m.getToken("refresh"),m.dataFill(i.data.userInfo),r.setUserInitialize(!0)),i.data.openMemberCenter||f.setLayoutMode("Disable"),r.setInitialize(!0),typeof d=="function"&&d(i)})},200)()}const _e=B({__name:"menuSub",props:{menus:{default:()=>[]},showIcon:{type:Boolean,default:!1}},setup(d){const p=d,m=r=>{var f;r.path=="/"||((f=r.meta)==null?void 0:f.type)=="menu_dir"||T(r)};return(r,f)=>{const i=k("Icon"),c=k("el-menu-item"),w=k("el-sub-menu"),y=W("blur");return o(!0),z(E,null,H(p.menus,(v,S)=>{var L,M;return o(),z(E,{key:S},[n(O)(v.children)?b((o(),l(c,{key:1,onClick:a=>n(T)(v),index:"column-"+((M=v.meta)==null?void 0:M.id),class:A(v.name.replace(/[\/]/g,"-"))},{title:s(()=>{var a;return[x(g((a=v.meta)==null?void 0:a.title),1)]}),default:s(()=>{var a;return[r.showIcon?(o(),l(i,{key:0,name:(a=v.meta)==null?void 0:a.icon,color:"var(--el-text-color-primary)"},null,8,["name"])):$("",!0)]}),_:2},1032,["onClick","index","class"])),[[y]]):b((o(),l(w,{key:0,onClick:a=>m(v),index:`column-${(L=v.meta)==null?void 0:L.id}`},{title:s(()=>{var a,e;return[r.showIcon?(o(),l(i,{key:0,name:(a=v.meta)==null?void 0:a.icon,color:"var(--el-text-color-primary)"},null,8,["name"])):$("",!0),x(" "+g((e=v.meta)==null?void 0:e.title),1)]}),default:s(()=>[(o(!0),z(E,null,H(v.children,(a,e)=>{var t;return b((o(),l(c,{key:e,onClick:u=>n(T)(a),index:"column-"+((t=a.meta)==null?void 0:t.id),class:A(a.name.replace(/[\/]/g,"-"))},{title:s(()=>{var u;return[x(g((u=a.meta)==null?void 0:u.title),1)]}),default:s(()=>{var u;return[r.showIcon?(o(),l(i,{key:0,name:(u=a.meta)==null?void 0:u.icon,color:"var(--el-text-color-primary)"},null,8,["name"])):$("",!0)]}),_:2},1032,["onClick","index","class"])),[[y]])}),128))]),_:2},1032,["onClick","index"])),[[y]])],64)}),128)}}});const R=V(_e,[["__scopeId","data-v-253da2e2"]]),pe=se({onChanged(d){const p=J();he(d),p.setLayout("isDark",d),p.onSetLayoutColor()}}),fe=re(pe);function he(d){const p=document.getElementsByTagName("html")[0];d?p.setAttribute("class","dark"):p.setAttribute("class","")}const ve={},ge={class:"theme-toggle-content"},ke={class:"switch"},ye={class:"switch-action"};function we(d,p){const m=k("Icon");return o(),z("div",ge,[C("div",ke,[C("div",ye,[h(m,{name:"local-dark",color:"#f2f2f2",size:"13px",class:"switch-icon dark-icon"}),h(m,{name:"local-light",color:"#303133",size:"13px",class:"switch-icon light-icon"})])])])}const Ce=V(ve,[["render",we],["__scopeId","data-v-047bd707"]]),xe={class:"header-user-box"},Ie=["src"],$e=B({__name:"menu",props:{showIcon:{type:Boolean,default:!1}},setup(d){const p=d,m=X(),r=Y(),f=J(),i=G(),c=F(),w=q(),y=K({activeMenu:""}),v=e=>{var t,u;for(const _ in w.state.navUserMenus)if(w.state.navUserMenus[_].path==e.path||w.state.navUserMenus[_].name==e.name)return(t=w.state.navUserMenus[_].meta)==null?void 0:t.id;for(const _ in c.headNav)if(c.headNav[_].path==e.path||c.headNav[_].name==e.name)return(u=c.headNav[_].meta)==null?void 0:u.id},S=e=>{if(e.path=="/")return y.activeMenu="index";if(e.path=="/goods")return y.activeMenu="goods";const t=v(e);t?y.activeMenu="column-"+t:e.path.startsWith("/user")&&(y.activeMenu="user")};S(m);const L=e=>{if(M(c.headNav,e)||M(w.state.navUserMenus,e)){const t=y.activeMenu;y.activeMenu="",P(()=>{y.activeMenu=t})}},M=(e,t)=>t.indexOf("language-switch")===0||t=="theme-switch"?!0:a(e,t),a=(e,t)=>{var u,_,D;for(const U in e){if(`column-${(u=e[U].meta)==null?void 0:u.id}`==t)return((_=e[U].meta)==null?void 0:_.menu_type)=="link";if((D=e[U].children)!=null&&D.length)return a(e[U].children,t)}return!1};return Z(()=>m.path,()=>{S(m)}),(e,t)=>{const u=k("Icon"),_=k("el-menu-item"),D=k("el-sub-menu"),U=k("el-menu"),N=W("blur");return o(),l(U,{"default-active":y.activeMenu,onSelect:L},{default:s(()=>[b((o(),l(_,{onClick:t[0]||(t[0]=I=>n(r).push({name:"/"})),index:"index"},{title:s(()=>[x(g(e.$t("Home")),1)]),default:s(()=>[p.showIcon?(o(),l(u,{key:0,name:"fa fa-home",color:"var(--el-text-color-primary)"})):$("",!0)]),_:1})),[[N]]),h(_,{onClick:t[1]||(t[1]=I=>n(r).push({name:"goods"})),index:"goods"},{title:s(()=>[x("商品")]),_:1}),h(R,{menus:n(c).headNav,"show-icon":e.showIcon},null,8,["menus","show-icon"]),n(w).state.open?(o(),z(E,{key:0},[n(i).isLogin()?b((o(),l(D,{key:0,onClick:t[4]||(t[4]=I=>e.$attrs.mode=="vertical"?"":n(r).push({name:"user"})),index:"user-box"},{title:s(()=>[C("div",xe,[C("img",{class:A(["header-user-avatar",e.$attrs.mode=="vertical"?"icon-header-user-avatar":""]),src:n(le)(n(i).avatar?n(i).avatar:"/static/images/avatar.png"),alt:""},null,10,Ie),x(" "+g(n(i).nickname),1)])]),default:s(()=>[b((o(),l(_,{onClick:t[2]||(t[2]=I=>n(r).push({name:"user"})),index:"user"},{default:s(()=>[e.showIcon?(o(),l(u,{key:0,name:"fa fa-user-circle",color:"var(--el-text-color-primary)"})):$("",!0),x(" "+g(e.$t("Member Center")),1)]),_:1})),[[N]]),h(R,{menus:n(w).state.navUserMenus,"show-icon":e.showIcon},null,8,["menus","show-icon"]),h(R,{menus:n(w).state.viewRoutes,"show-icon":e.showIcon},null,8,["menus","show-icon"]),b((o(),l(_,{onClick:t[3]||(t[3]=I=>n(i).logout()),index:"user-logout"},{default:s(()=>[e.showIcon?(o(),l(u,{key:0,name:"fa fa-sign-out",color:"var(--el-text-color-primary)"})):$("",!0),x(" "+g(e.$t("Logout login")),1)]),_:1})),[[N]])]),_:1})),[[N]]):b((o(),l(_,{key:1,onClick:t[5]||(t[5]=I=>n(r).push({name:"user"})),index:"user"},{default:s(()=>[e.showIcon?(o(),l(u,{key:0,name:"fa fa-user-circle",color:"var(--el-text-color-primary)"})):$("",!0),x(" "+g(e.$t("Member Center")),1)]),_:1})),[[N]]),b((o(),l(D,{index:"language-switch",class:"language-switch"},{title:s(()=>[e.showIcon?(o(),l(u,{key:0,name:"local-lang",color:"var(--el-text-color-primary)"})):$("",!0),x(" "+g(e.$t("Language")),1)]),default:s(()=>[(o(!0),z(E,null,H(n(f).lang.langArray,I=>(o(),l(_,{onClick:Ee=>n(ie)(I.name),key:I.name,index:"language-switch-"+I.value,class:"language-switch"},{default:s(()=>[e.showIcon?(o(),l(u,{key:0,name:"fa fa-circle-o",color:"var(--el-text-color-primary)"})):$("",!0),x(" "+g(I.value),1)]),_:2},1032,["onClick","index"]))),128))]),_:1})),[[N]]),h(_,{index:"theme-switch",class:A(["theme-switch",e.$attrs.mode+"-theme-switch"])},{default:s(()=>[h(Ce,{onClick:t[6]||(t[6]=I=>n(fe)())})]),_:1},8,["class"])],64)):$("",!0)]),_:1},8,["default-active"])}}});const j=V($e,[["__scopeId","data-v-468028a0"]]),be=d=>(Q("data-v-02b095e8"),d=d(),ee(),d),Me={class:"site-name"},Ne={class:"header-row"},ze=be(()=>C("img",{src:ue},null,-1)),Se={class:"site-name"},Le=B({__name:"header",setup(d){const p=X(),m=Y(),r=F(),f=q();return Z(()=>p.path,()=>{f.toggleMenuExpand(!1)},{immediate:!0}),me(),(i,c)=>{const w=k("Icon"),y=k("el-scrollbar"),v=k("el-col"),S=k("el-row"),L=k("el-drawer"),M=k("el-header");return o(),l(M,{class:"header"},{default:s(()=>[h(S,{justify:"center"},{default:s(()=>[h(v,{class:"header-row",xs:24,sm:24,md:16},{default:s(()=>[C("div",{onClick:c[0]||(c[0]=a=>n(m).push({name:"/"})),class:"header-logo"},[C("span",Me,g(n(r).siteName),1)]),n(f).state.menuExpand?$("",!0):(o(),z("div",{key:0,onClick:c[1]||(c[1]=a=>n(f).toggleMenuExpand(!0)),class:"user-menus-expand hidden-md-and-up"},[h(w,{name:"fa fa-indent",color:"var(--el-color-primary)",size:"20"})])),h(y,{class:"hidden-sm-and-down"},{default:s(()=>[h(j,{class:"frontend-header-menu",ellipsis:!1,mode:"horizontal"})]),_:1})]),_:1})]),_:1}),h(L,{class:"ba-aside-drawer","append-to-body":!0,modelValue:n(f).state.menuExpand,"onUpdate:modelValue":c[4]||(c[4]=a=>n(f).state.menuExpand=a),"with-header":!1,direction:"ltr",size:"40%"},{default:s(()=>[C("div",Ne,[C("div",{onClick:c[2]||(c[2]=a=>n(m).push({name:"/"})),class:"header-logo"},[ze,C("span",Se,g(n(r).siteName),1)]),C("div",{onClick:c[3]||(c[3]=a=>n(f).toggleMenuExpand(!1)),class:"user-menus-expand hidden-md-and-up"},[h(w,{name:"fa fa-dedent",color:"var(--el-color-primary)",size:"20"})])]),h(j,{"show-icon":!0,mode:"vertical"})]),_:1},8,["modelValue"])]),_:1})}}});const Fe=V(Le,[["__scopeId","data-v-02b095e8"]]),Ue={href:"http://beian.miit.gov.cn/"},De=B({__name:"footer",setup(d){const p=F();return(m,r)=>{const f=k("el-footer");return o(),l(f,{class:"footer"},{default:s(()=>[C("div",null,[x(" Copyright @ 2020~2022 "+g(n(p).siteName)+" "+g(m.$t("Copyright"))+" ",1),C("a",Ue,g(n(p).recordNumber),1)])]),_:1})}}});const Te=V(De,[["__scopeId","data-v-5dadaf49"]]);export{Te as F,Fe as H,me as i};
