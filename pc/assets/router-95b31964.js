import{l as r,x as m,j as b,u as R,a as E,m as h,w as k,y as s}from"./index-0ba52414.js";import{a9 as f,aa as v,I as p,i as w,ab as A,ac as N}from"./vue-18a0f25a.js";const I=function(e=()=>{}){const n=document.querySelector(".ba-layout-shade");n&&n.remove(),e()},P=async e=>{try{const n=await r.push(e);f(n,v.aborted)?p({message:m.global.t("utils.Navigation failed, navigation guard intercepted!"),type:"error"}):f(n,v.duplicated)&&p({message:m.global.t("utils.Navigation failed, it is at the navigation target position!"),type:"warning"})}catch(n){p({message:m.global.t("utils.Navigation failed, invalid route!"),type:"error"}),console.error(n)}},O=e=>{var t,o;const n=[];r.getRoutes().forEach(c=>{c.path&&n.push(c.path)});let a=!1;for(const c in e){if(((t=e[c].meta)==null?void 0:t.menu_type)=="tab"&&n.indexOf(e[c].path)!==-1)return e[c];if(e[c].children&&((o=e[c].children)!=null&&o.length)&&(a=O(e[c].children),a))return a}return a},D=e=>{var i;switch((i=e.meta)==null?void 0:i.menu_type){case"iframe":case"tab":P({path:e.path});break;case"link":window.open(e.path,"_blank");break;default:p({message:m.global.t("utils.Navigation failed, the menu type is unrecognized!"),type:"error"});break}const n=b();n.layout.shrink&&I(()=>{n.setLayout("menuCollapse",!0)})},M=(e,n)=>{const i=R(),a=E(),t=Object.assign({"/src/views/frontend/goods.vue":()=>s(()=>import("./goods-0f307eb3.js"),["assets/goods-0f307eb3.js","assets/index-0ba52414.js","assets/vue-18a0f25a.js","assets/footer-165deddd.js"]),"/src/views/frontend/index.vue":()=>s(()=>import("./index-d95a626f.js"),["assets/index-d95a626f.js","assets/index-0ba52414.js","assets/vue-18a0f25a.js","assets/footer-165deddd.js"]),"/src/views/frontend/user/account/balance.vue":()=>s(()=>import("./balance-44d1ca8e.js"),["assets/balance-44d1ca8e.js","assets/index-0ba52414.js","assets/vue-18a0f25a.js"]),"/src/views/frontend/user/account/changePassword.vue":()=>s(()=>import("./changePassword-4f8798a4.js"),["assets/changePassword-4f8798a4.js","assets/vue-18a0f25a.js","assets/index-0ba52414.js","assets/validate-05b32298.js","assets/index-4966a1bf.js"]),"/src/views/frontend/user/account/integral.vue":()=>s(()=>import("./integral-ea124e3c.js"),["assets/integral-ea124e3c.js","assets/index-0ba52414.js","assets/vue-18a0f25a.js"]),"/src/views/frontend/user/account/overview.vue":()=>s(()=>import("./overview-e89dd394.js"),["assets/overview-e89dd394.js","assets/index-0ba52414.js","assets/vue-18a0f25a.js","assets/echarts-02f2616f.js"]),"/src/views/frontend/user/account/profile.vue":()=>s(()=>import("./profile-0d7e3de6.js"),["assets/profile-0d7e3de6.js","assets/vue-18a0f25a.js","assets/index-4966a1bf.js","assets/index-0ba52414.js","assets/validate-05b32298.js","assets/index-21f3de04.js"]),"/src/views/frontend/user/login.vue":()=>s(()=>import("./login-090b0e78.js"),["assets/login-090b0e78.js","assets/vue-18a0f25a.js","assets/footer-165deddd.js","assets/index-0ba52414.js","assets/validate-05b32298.js","assets/index-21f3de04.js"])});if(e.length&&(u(t,e,"",!0),a.mergeAuthNode(g(e,"/")),i.setHeadNav(l(e,"/",["nav"])),a.mergeNavUserMenus(l(e,"/",["nav_user_menu"]))),n.length&&w(a.state.viewRoutes)){u(t,n,h.name);const o="/"+h.name+"/";a.mergeAuthNode(g(n,o)),a.mergeNavUserMenus(l(n,"/",["nav_user_menu"])),a.setShowHeadline(n.length>1),a.setViewRoutes(l(n,o))}},l=(e,n="/",i=["menu","menu_dir"])=>{const a=[];for(const t in e){if(e[t].extend=="add_rules_only"||!i.includes(e[t].type)||e[t].type=="menu_dir"&&e[t].children&&!e[t].children.length||["route","menu","nav_user_menu","nav"].includes(e[t].type)&&(e[t].menu_type=="tab"&&!e[t].component||["link","iframe"].includes(e[t].menu_type)&&!e[t].url))continue;const o=["link","iframe"].includes(e[t].menu_type)?e[t].url:n+e[t].path;let c=[];e[t].children&&e[t].children.length>0&&(c=l(e[t].children,n,i)),a.push({path:o,name:e[t].name,component:e[t].component,meta:{id:e[t].id,title:e[t].title,icon:e[t].icon,keepalive:e[t].keepalive,menu_type:e[t].menu_type,type:e[t].type},children:c})}return a},g=(e,n="/")=>{const i=new Map([]);return y(e,i,n,n),i},y=(e,n,i="/",a="/")=>{const t=[];for(const o in e)e[o].type=="button"&&t.push(i+e[o].name),e[o].children&&e[o].children.length>0&&y(e[o].children,n,i,i+e[o].name);t&&t.length>0&&n.set(a,t)},u=(e,n,i,a=!1)=>{for(const t in n)n[t].extend!="add_menu_only"&&((n[t].menu_type=="tab"&&e[n[t].component]||n[t].menu_type=="iframe")&&T(e,n[t],i,a),n[t].children&&n[t].children.length>0&&u(e,n[t].children,i,a))},T=(e,n,i,a)=>{let t="",o;if(n.menu_type=="iframe"?(t=(k()?"/admin":"/user")+"/iframe/"+encodeURIComponent(n.url),o=()=>s(()=>import("./iframe-90e9142e.js"),["assets/iframe-90e9142e.js","assets/layout-51568979.js","assets/index-0ba52414.js","assets/vue-18a0f25a.js"])):(t=i?n.path:"/"+n.path,o=e[n.component]),n.menu_type=="tab"&&a){const d=L(n.name);if(d.length){for(const _ in d)if(r.hasRoute(d[_])){i=d[_];break}}}const c={path:t,name:n.name,component:o,meta:{title:n.title,extend:n.extend,icon:n.icon,keepalive:n.keepalive,menu_type:n.menu_type,type:n.type,url:n.url,addtab:!0}};i?r.addRoute(i,c):r.addRoute(c)},L=e=>{const n=A(e.split("/")),i=[],a=[];for(const t in n)i.push(n[t]),parseInt(t)!=n.length-1&&a.push(i.join("/"));return N(a)};export{O as g,M as h,D as o,P as r};
